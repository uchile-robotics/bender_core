<launch>

	<!-- Parameters -->
	<arg name="worldname" default="amtc"/>

	<!-- - - - - - - - - - - - - - - Run Stage - - - - - - - - - - - - - -->
	<node pkg="stage_ros" type="stageros" name="stage" respawn="true" args="$(find bender_stage)/world/$(arg worldname)/world.world">

		<!-- bender -->
		<!-- <remap from="/base_scan" to="/bender/stage/laser_front_BAD/scan"/> -->
		<remap from="/base_scan" to="/bender/sensors/laser_front/scan"/>
		<remap from="/cmd_vel"   to="/bender/nav/base/cmd_vel"/>
		<remap from="/odom"      to="/bender/nav/odom"/>

		<!-- stage topics -->
		<remap from="/base_pose_ground_truth" to="/stage/base_pose_ground_truth"/>
	</node>


	<!-- hokuyo corrector -->
	<!-- useful to mirror laser readings (ex: when using an inverted laser, which stage cant handle) -->
	<!--node pkg="bender_sensors" type="laser_inverter" name="hokuyo_corrector" ns="/bender/stage/">

		< ! - - original stage reading - - >
		<remap from="hokuyo_corrector/scan_in"  to="/bender/stage/laser_front_BAD/scan"/>

		< ! - - remapped stage reading - - > 
		<remap from="hokuyo_corrector/scan_out" to="/bender/sensors/laser_front/scan"/>
		<param name="scan_out_frame"         value="/bender/sensors/laser_front_link"/>

	</node-->


	<!-- - - - - - - -  Create tf for a bender-stage tf merge - - - - - - - - -->
	<arg name="publish_period" value="100"/>

	<!-- /base_link  - - - >  /bender/base_link -->
	<node name="stage_tf_base_remapper" pkg="tf" type="static_transform_publisher"
   args="0 0 0 0 0 0 /base_link /bender/base_link $(arg publish_period)" ns="/bender/stage/"/>

	<!-- /bender/odom  - - - > /odom -->
	<node name="stage_tf_odom_remapper" pkg="tf" type="static_transform_publisher"
   args="0 0 0 0 0 0 /bender/odom /odom $(arg publish_period)" ns="/bender/stage/"/>

</launch>
